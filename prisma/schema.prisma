// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

enum Department {
  ENGINEERING
  HUMANITIES
  LIFE_SCIENCES
  PHYSICAL_SCIENCES
  SOCIAL_SCIENCES
}

// https://admission.ucla.edu/apply/majors
enum Major {
  AEROSPACE_ENGINEERING
  AFRICAN_AMERICAN_STUDIES
  AFRICAN_AND_MIDDLE_EASTERN_STUDIES
  AMERICAN_INDIAN_STUDIES
  AMERICAN_LITERATURE_AND_CULTURE
  ANCIENT_NEAR_EAST_AND_EGYPTOLOGY
  ANTHROPOLOGY
  ARABIC
  ARCHITECTURAL_STUDIES
  ART
  ART_HISTORY
  ASIAN_AMERICAN_STUDIES
  ASIAN_HUMANITIES
  ASIAN_LANGUAGES_AND_LINGUISTICS
  ASIAN_RELIGIONS
  ASIAN_STUDIES
  ASTROPHYSICS
  ATMOSPHERIC_AND_OCEANIC_SCIENCES
  ATMOSPHERIC_AND_OCEANIC_SCIENCES_MATHEMATICS
  BIOCHEMISTRY
  BIOENGINEERING
  BIOLOGY
  BIOPHYSICS
  BUSINESS_ECONOMICS
  CENTRAL_AND_EAST_EUROPEAN_LANGUAGES_AND_CULTURES
  CHEMICAL_ENGINEERING
  CHEMISTRY
  CHEMISTRY_MATERIALS_SCIENCE
  CHICANA_AND_CHICANO_STUDIES
  CHINESE
  CIVIL_ENGINEERING
  CLASSICAL_CIVILIZATION
  CLIMATE_SCIENCE
  COGNITIVE_SCIENCE
  COMMUNICATION
  COMPARATIVE_LITERATURE
  COMPUTATIONAL_AND_SYSTEMS_BIOLOGY
  COMPUTER_ENGINEERING
  COMPUTER_SCIENCE
  COMPUTER_SCIENCE_AND_ENGINEERING
  DANCE
  DATA_THEORY
  DESIGN__MEDIA_ARTS
  DISABILITY_STUDIES
  EARTH_AND_ENVIRONMENTAL_SCIENCE
  ECOLOGY_BEHAVIOR_AND_EVOLUTION
  ECONOMICS
  EDUCATION_AND_SOCIAL_TRANSFORMATION
  ELECTRICAL_ENGINEERING
  ENGLISH
  ENVIRONMENTAL_SCIENCE
  ETHNOMUSICOLOGY
  EUROPEAN_LANGUAGE_AND_TRANSCULTURAL_STUDIES
  EUROPEAN_LANGUAGES_AND_TRANSCULTURAL_STUDIES_WITH_FRENCH_AND_FR
  EUROPEAN_LANGUAGES_AND_TRANSCULTURAL_STUDIES_WITH_GERMAN
  EUROPEAN_LANGUAGES_AND_TRANSCULTURAL_STUDIES_WITH_ITALIAN
  EUROPEAN_LANGUAGES_AND_TRANSCULTURAL_STUDIES_WITH_SCANDINAVIAN
  EUROPEAN_STUDIES
  FILM_AND_TELEVISION
  GENDER_STUDIES
  GEOGRAPHY
  GEOGRAPHY_ENVIRONMENTAL_STUDIES
  GEOLOGY
  GEOLOGY_ENGINEERING_GEOLOGY
  GEOPHYSICS
  GLOBAL_JAZZ_STUDIES
  GLOBAL_STUDIES
  GREEK
  GREEK_AND_LATIN
  HISTORY
  HUMAN_BIOLOGY_AND_SOCIETY
  INDIVIDUAL_FIELD_OF_CONCENTRATION_IN_LETTERS_AND_SCIENCE
  INDIVIDUAL_FIELD_OF_CONCENTRATION_IN_THEATER_FILM_AND_TELEVISIO
  INDIVIDUAL_FIELD_OF_CONCENTRATION_IN_THE_ARTS_AND_ARCHITECTURE
  INTERNATIONAL_DEVELOPMENT_STUDIES
  IRANIAN_STUDIES
  JAPANESE
  JEWISH_STUDIES
  KOREAN
  LABOR_STUDIES
  LATIN
  LATIN_AMERICAN_STUDIES
  LINGUISTICS
  LINGUISTICS_AND_ANTHROPOLOGY
  LINGUISTICS_AND_ASIAN_LANGUAGES_AND_CULTURES
  LINGUISTICS_AND_COMPUTER_SCIENCE
  LINGUISTICS_AND_ENGLISH
  LINGUISTICS_AND_PHILOSOPHY
  LINGUISTICS_AND_PSYCHOLOGY
  LINGUISTICS_AND_SPANISH
  LINGUISTICS_APPLIED
  MARINE_BIOLOGY
  MATERIALS_ENGINEERING
  MATHEMATICS
  MATHEMATICS_FOR_TEACHING
  MATHEMATICS_OF_COMPUTATION
  MATHEMATICS_APPLIED
  MATHEMATICS_FINANCIAL_ACTUARIAL
  MATHEMATICS_APPLIED_SCIENCE
  MATHEMATICS_ECONOMICS
  MECHANICAL_ENGINEERING
  MICROBIOLOGY_IMMUNOLOGY_AND_MOLECULAR_GENETICS
  MIDDLE_EASTERN_STUDIES
  MOLECULAR_CELL_AND_DEVELOPMENTAL_BIOLOGY
  MUSIC_COMPOSITION
  MUSIC_EDUCATION
  MUSIC_INDUSTRY
  MUSIC_PERFORMANCE
  MUSICOLOGY
  NEUROSCIENCE
  NORDIC_STUDIES
  NURSING__PRELICENSURE
  PHILOSOPHY
  PHYSICS
  PHYSIOLOGICAL_SCIENCE
  POLITICAL_SCIENCE
  PORTUGUESE_AND_BRAZILIAN_STUDIES
  PSYCHOBIOLOGY
  PSYCHOLOGY
  PUBLIC_AFFAIRS
  PUBLIC_HEALTH
  RELIGION_STUDY_OF
  RUSSIAN_LANGUAGE_AND_LITERATURE
  RUSSIAN_STUDIES
  SOCIOLOGY
  SOUTHEAST_ASIAN_STUDIES
  SPANISH
  SPANISH_AND_COMMUNITY_AND_CULTURE
  SPANISH_AND_LINGUISTICS
  SPANISH_AND_PORTUGUESE
  STATISTICS_AND_DATA_SCIENCE
  THEATER
  UNDECLARED_ENGINEERING_AND_APPLIED_SCIENCE
  UNDECLARED_HUMANITIES
  UNDECLARED_LIFE_SCIENCES
  UNDECLARED_PHYSICAL_SCIENCES
  UNDECLARED_SOCIAL_SCIENCES
  WORLD_ARTS_AND_CULTURES
}

// https://admission.ucla.edu/apply/minors
enum Minor {
  ACCOUNTING
  AFRICAN_AMERICAN_STUDIES
  AFRICAN_STUDIES
  AFRICAN_AND_MIDDLE_EASTERN_STUDIES
  AMERICAN_INDIAN_STUDIES
  ANCIENT_NEAR_EAST_AND_EGYPTOLOGY
  ANTHROPOLOGY
  APPLIED_DEVELOPMENTAL_PSYCHOLOGY
  ARABIC_AND_ISLAMIC_STUDIES
  ARMENIAN_STUDIES
  ART_HISTORY
  ASIAN_AMERICAN_STUDIES
  ASIAN_HUMANITIES
  ASIAN_LANGUAGES
  ATMOSPHERIC_AND_OCEANIC_SCIENCES
  BIOINFORMATICS
  BIOMEDICAL_RESEARCH
  BRAIN_AND_BEHAVIORAL_HEALTH
  CENTRAL_AMERICAN_STUDIES
  CENTRAL_AND_EAST_EUROPEAN_STUDIES
  CHICANA_AND_CHICANO_STUDIES
  CLASSICAL_CIVILIZATION
  COGNITIVE_SCIENCE
  COMMUNITY_ENGAGEMENT_AND_SOCIAL_CHANGE
  COMPARATIVE_LITERATURE
  CONSERVATION_BIOLOGY
  CREATIVE_WRITING
  DATA_SCIENCE_ENGINEERING
  DIGITAL_HUMANITIES
  DISABILITY_STUDIES
  EARTH_AND_ENVIRONMENTAL_SCIENCE
  EAST_ASIAN_STUDIES
  EDUCATION_STUDIES
  ENGLISH
  ENTREPRENEURSHIP
  ENVIRONMENTAL_ENGINEERING
  ENVIRONMENTAL_SYSTEMS_AND_SOCIETY
  ETHNOMUSICOLOGY
  EUROPEAN_LANGUAGES_AND_TRANSCULTURAL_STUDIES
  EUROPEAN_LANGUAGES_AND_TRANSCULTURAL_STUDIES_WITH_FRENCH_AND_FR
  EUROPEAN_LANGUAGES_AND_TRANSCULTURAL_STUDIES_WITH_GERMAN
  EUROPEAN_LANGUAGES_AND_TRANSCULTURAL_STUDIES_WITH_ITALIAN
  EUROPEAN_STUDIES
  EVOLUTIONARY_MEDICINE
  FILM_TELEVISION_AND_DIGITAL_MEDIA
  FOOD_STUDIES
  GENDER_STUDIES
  GEOCHEMISTRY
  GEOGRAPHY
  GEOGRAPHY_ENVIRONMENTAL_STUDIES
  GEOLOGY
  GEOPHYSICS_AND_PLANETARY_PHYSICS
  GEOSPATIAL_INFORMATION_SYSTEMS_AND_TECHNOLOGIES
  GERONTOLOGY
  GLOBAL_HEALTH
  GLOBAL_STUDIES
  GREEK_LANGUAGE_AND_CULTURE
  HEBREW_AND_JEWISH_STUDIES
  HISTORY
  HISTORY_OF_SCIENCE_TECHNOLOGY_AND_MEDICINE
  INFORMATION_AND_MEDIA_LITERACY
  INTERNATIONAL_MIGRATION_STUDIES
  IRANIAN_MUSIC
  IRANIAN_STUDIES
  ISRAEL_STUDIES
  LABOR_STUDIES
  LATIN_AMERICAN_STUDIES
  LATIN_LANGUAGE_AND_CULTURE
  LESBIAN_GAY_BISEXUAL_TRANSGENDER_AND_QUEER_STUDIES
  LINGUISTICS
  LITERATURE_AND_THE_ENVIRONMENT
  MATHEMATICAL_BIOLOGY
  MATHEMATICS
  MATHEMATICS_FOR_TEACHING
  MEXICAN_STUDIES
  MIDDLE_EASTERN_STUDIES
  MUSIC_INDUSTRY
  MUSICOLOGY
  NEUROSCIENCE
  PHILOSOPHY
  PILIPINO_STUDIES
  PORTUGUESE_AND_BRAZILIAN_STUDIES
  PROFESSIONAL_WRITING
  PUBLIC_AFFAIRS
  PUBLIC_HEALTH
  RELIGION_STUDY_OF
  RUSSIAN_LANGUAGE
  RUSSIAN_LITERATURE
  RUSSIAN_STUDIES
  SCANDINAVIAN
  SCIENCE_EDUCATION
  SOCIAL_DATA_SCIENCE
  SOCIAL_THOUGHT
  SOCIETY_AND_GENETICS
  SOUTH_ASIAN_STUDIES
  SOUTHEAST_ASIAN_STUDIES
  SPANISH
  SPANISH_LINGUISTICS
  STATISTICS_AND_DATA_SCIENCE
  STRUCTURAL_BIOLOGY
  SYSTEMS_BIOLOGY
  THEATER
  URBAN_AND_REGIONAL_STUDIES
  VISUAL_AND_PERFORMING_ARTS_EDUCATION
}

enum Pronouns {
  NOT_LISTED
  HE_HIM
  SHE_HER
  THEY_THEM
}

model Student {
  id             String          @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  email          String          @unique @db.VarChar(100) // TODO: remove and use something else in LabeledJob
  jobs           LabeledJob[]
  studentProfile StudentProfile?
}

model StudentProfile {
  id              String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  student         Student  @relation(fields: [studentId], references: [id])
  studentId       String   @unique @db.Uuid
  firstName       String   @db.VarChar(80)
  lastName        String   @db.VarChar(80)
  pronouns        Pronouns
  preferredEmail  String?  @db.VarChar(100)
  phoneNumber     String?  @db.VarChar(30)
  bio             String   @db.VarChar(500)
  major           Major
  additionalMajor Major?
  minor           Minor?
  additionalMinor Minor?
  graduationDate  String   @db.VarChar(12)
  gpa             String   @db.VarChar(5)
  majorGpa        String   @db.VarChar(5)
  skills          String[] @db.VarChar(60)
  experience      String?  @db.VarChar(1000)
  coursework      String?  @db.VarChar(800)
  links           String[] @db.VarChar(200)
  // resume
}

model Researcher {
  id                String             @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  email             String             @unique @db.VarChar(100)
  jobs              Job[]
  labs              Lab[]
  researcherProfile ResearcherProfile?
}

model ResearcherProfile {
  id           String     @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  researcher   Researcher @relation(fields: [researcherId], references: [id])
  researcherId String     @unique @db.Uuid
  name         String     @db.VarChar(161)
}

model Lab {
  id               String       @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  name             String       @db.VarChar(50)
  jobs             Job[]
  adminResearchers Researcher[]
}

enum Duration {
  QUARTERLY
  SUMMER
  ACADEMIC_YEAR
  YEAR_ROUND
}

enum Location {
  ON_CAMPUS
  OFF_CAMPUS
  REMOTE
}

model Job {
  id           Int          @id @default(autoincrement())
  created      DateTime     @default(now())
  startDate    DateTime
  closingDate  DateTime
  closed       Boolean
  title        String       @db.VarChar(50)
  description  String
  poster       Researcher   @relation(fields: [posterId], references: [id])
  posterId     String       @db.Uuid
  lab          Lab          @relation(fields: [labId], references: [id])
  labId        String       @db.Uuid
  applicants   LabeledJob[]
  paid         Boolean
  duration     Duration
  departments  Department[]
  weeklyHours  Int
  credit       Boolean
  location     Location
  externalLink String?      @db.VarChar(200)
}

enum JobStatus {
  HIDDEN
  SAVED
  APPLIED
}

enum PIJobStatus {
  CONSIDERING
  REVIEWING
  REJECTED
  INTERVIEWING
  ACCEPTED
  JOINED
}

model LabeledJob {
  job            Job         @relation(fields: [jobId], references: [id])
  jobId          Int
  applicant      Student     @relation(fields: [applicantEmail], references: [email])
  applicantEmail String      @db.VarChar(100)
  lastUpdated    DateTime    @default(now())
  status         JobStatus
  piStatus       PIJobStatus
  bookmarked     Boolean     @default(false)

  @@id([jobId, applicantEmail])
}
